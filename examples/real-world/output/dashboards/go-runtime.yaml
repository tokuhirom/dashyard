title: "Go Runtime"
rows:
  - title: "Overview"
    panels:
      - title: "Go Runtime"
        type: markdown
        content: |
          Go runtime metrics for all Go services (dummyapp, traefik).
          Includes GC, goroutines, memory stats, and thread counts.
        span: 12

  - title: "Goroutines & Threads"
    panels:
      - title: "Goroutines"
        type: graph
        query: 'go_goroutines'
        unit: count
        legend: "{job}"
        y_min: 0
      - title: "OS Threads"
        type: graph
        query: 'go_threads'
        unit: count
        legend: "{job}"
        y_min: 0

  - title: "Garbage Collection"
    panels:
      - title: "GC Duration (p75)"
        type: graph
        query: 'go_gc_duration_seconds{quantile="0.75"}'
        unit: seconds
        legend: "{job}"
        y_min: 0
      - title: "GC Duration (max)"
        type: graph
        query: 'go_gc_duration_seconds{quantile="1.0"}'
        unit: seconds
        legend: "{job}"
        y_min: 0
      - title: "GC Cycles Rate"
        type: graph
        query: 'rate(go_gc_duration_seconds_count[5m])'
        unit: count
        chart_type: bar
        legend: "{job}"
        y_min: 0

  - title: "Heap Memory"
    panels:
      - title: "Heap Allocated (In Use)"
        type: graph
        query: 'go_memstats_heap_alloc_bytes'
        unit: bytes
        legend: "{job}"
        y_min: 0
      - title: "Heap System vs In-Use"
        type: graph
        query: 'go_memstats_heap_sys_bytes'
        unit: bytes
        legend: "{job} sys"
        y_min: 0
      - title: "Heap Objects"
        type: graph
        query: 'go_memstats_heap_objects'
        unit: count
        legend: "{job}"
        y_min: 0

  - title: "Memory Detail"
    panels:
      - title: "Total Allocated (In Use)"
        type: graph
        query: 'go_memstats_alloc_bytes'
        unit: bytes
        legend: "{job}"
        y_min: 0
      - title: "Allocation Rate"
        type: graph
        query: 'rate(go_memstats_alloc_bytes_total[5m])'
        unit: bytes
        legend: "{job}"
        y_min: 0
      - title: "System Memory"
        type: graph
        query: 'go_memstats_sys_bytes'
        unit: bytes
        legend: "{job}"
        y_min: 0

  - title: "Memory Internals"
    panels:
      - title: "Stack In Use"
        type: graph
        query: 'go_memstats_stack_inuse_bytes'
        unit: bytes
        legend: "{job}"
        y_min: 0
      - title: "MSpan In Use"
        type: graph
        query: 'go_memstats_mspan_inuse_bytes'
        unit: bytes
        legend: "{job}"
        y_min: 0
      - title: "Next GC Target"
        type: graph
        query: 'go_memstats_next_gc_bytes'
        unit: bytes
        legend: "{job}"
        y_min: 0

  - title: "Object Operations"
    panels:
      - title: "Mallocs Rate"
        type: graph
        query: 'rate(go_memstats_mallocs_total[5m])'
        unit: count
        chart_type: bar
        legend: "{job}"
        y_min: 0
      - title: "Frees Rate"
        type: graph
        query: 'rate(go_memstats_frees_total[5m])'
        unit: count
        chart_type: bar
        legend: "{job}"
        y_min: 0
